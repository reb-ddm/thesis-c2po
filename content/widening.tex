\section{Widening}

\subsection{Widening with automaton}


The partial order on $\mathcal{P}_2[=]$ has infinite strictly descending chains, as well as
infinite strictly ascending chains. Therefore we need to define a widening operator.

\begin{example}
    Consider the sequence of conjunctions
    \[
        \Psi_n \equiv (*^{2^n} \&x = \&x)\hspace{6pt} (n\geq 0).
    \]
   This could for example occur in a list structure, where each list element points to the next element of the list, and the last element points again to the first element of the list.
   Then we have for each $n \geq 0$, $\Psi_n \Longrightarrow \Psi_{n+1}$ and in particular the product automaton between $M_P[\Psi_n]$ and $M_P[\Psi_{n+1}]$ is $M_P[\Psi_{n+1}]$.
   The computation of this product automaton for $n = 0$ and $n = 1$ can be found in Example~\ref{example:join-subset}. This is an example of an infinite strictly ascending chain in $\mathcal{P}_2[=]$.
\end{example}

We decide to define the widening operator in such a way that the added result can't contain terms of arbitrary size, such that there can't be ascending chains of arbitrary size. Therefore we define the widening operator as first computing the join and then restricting the set of terms of the result to the set of terms that occur in the first input conjunction.

\begin{definition}
    For two conjunctions $\Psi_1$ and $\Psi_2$ over the sets of terms $\T_1$ and $\T_2$, respectively, we define the widening operation
     $\Psi_1 \widen \Psi_2 = \restr{(\Psi_1 \join \Psi_2)}{\T_1}$.
\end{definition}

For a given set $\T$ of terms, there is only a finite number of possible automata and sets of disequations that contain only terms of $\T$.
The set of terms doesn't change after having applied the widening operation, therefore the widening operator will always reach a fixpoint after a finite amount of iterations.
\ignore{
\begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]

    \node[state] (Q0) {$\&x$};

    \path[->]
      (Q0) edge [loop above] node {$0$} ();

  \end{tikzpicture}

  \begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]

    \node[state] (Q1) {$\&x$};
    \node[state, right=of Q1] (Q2) {$x$};

    \path[->]
      (Q1) edge[bend left, above] node {$0$} (Q2)
      (Q2) edge[bend left, below] node {$0$} (Q1);

  \end{tikzpicture}

% Automaton M1
\begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]

    \node[state] (Q0) {$A; B+1; D+2$};
  \end{tikzpicture}

  % Automaton M2
  \begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]

    \node[state] (Q1) {$A; B+1,D+2$};
  \end{tikzpicture}

  % Automaton M3
  \begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]

    \node[state] (Q0Q1_0) {$A$};
    \node[state, right=of Q0Q1_0] (Q0Q1_1) {$B; C-1$};
  \end{tikzpicture}
}

\subsection{Widening without automaton}


\section{Narrowing}
